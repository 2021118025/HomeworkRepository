<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메인페이지</title>
    <link rel="stylesheet" type = "text/css" href="main.css">
</head>

<body>
  <div id="wrap">
    <header class="header">
      <div class="header-txt">인프밍 영화 정보 사이트입니다.</div>
      <nav class="nav">
        <a href="index.html" class="active">메인페이지</a>
        <a href="login.html">로그인</a>
        <a href="signup.html">회원가입</a>
      </nav>
    </header>

    <main class="main">
      <div id="filtering">
        <input type="text" id="search" placeholder="키워드를 입력하세요" />
        <button id="btn">Filter results</button>
      </div>

      <div class="article-txt">Movies</div>

      <section class="movie-section">
        <!-- 왼쪽 정렬 기준 -->
        <div class="sort-panel">
          <div><strong>정렬 기준</strong></div>
          <label><input type="radio" name="sort" value="rating-desc"> 평점 내림차순</label><br>
          <label><input type="radio" name="sort" value="rating-asc"> 평점 오름차순</label><br>
          <label><input type="radio" name="sort" value="date-desc"> 개봉 내림차순</label><br>
          <label><input type="radio" name="sort" value="date-asc"> 개봉 오름차순</label>
        </div>

        <!-- 오른쪽 영화 목록 -->
        <div class="movie-grid" id="movie-grid"></div>
      </section>
    </main>
  </div>
<script>
  const movieData = [
    { title: "Toy Story", date: "1995-10-30", rating: 7.7, img: "images/toystory.jpg", overview: "Led by Woody, Andy's toys live happily in his room until Andy's birthday brings Buzz Lightyear onto the scene..."},
    { title: "Jumanji", date: "1995-12-15", rating: 6.9, img: "images/jumanji.jpg", overview: "Led by Woody, Andy's toys live happily in his room until Andy's birthday brings Buzz Lightyear onto the scene..."},
    { title: "Pocahontas", date: "1995-06-23", rating: 6.5, img: "images/pocahontas.jpg", overview: "overview" },
    { title: "Golden Eye", date: "1995-11-17", rating: 7.1, img: "images/goldeneye.jpg", overview: "overview" },
    { title: "Balto", date: "1995-12-22", rating: 7.0, img: "images/balto.jpg", overview: "overview" },
    { title: "Four Rooms", date: "1995-12-25", rating: 6.7, img: "images/fourrooms.jpg", overview: "overview" },
    { title: "Rebecca", date: "1940-04-12", rating: 8.0, img: "images/rebecca.jpg", overview: "overview" },
    { title: "Star Wars", date: "1977-05-25", rating: 8.6, img: "images/starwars.jpg", overview: "overview" },
    { title: "Movie A", date: "2000-01-01", rating: 5.1, img: "images/toystory.jpg", overview: "overview" },
    { title: "Movie B", date: "2001-01-01", rating: 6.1, img: "images/jumanji.jpg", overview: "overview" },
    { title: "Movie C", date: "2002-01-01", rating: 6.3, img: "images/fourrooms.jpg", overview: "overview" },
    { title: "Movie D", date: "2003-01-01", rating: 7.3, img: "images/pocahontas.jpg", overview: "overview" },
    { title: "Movie E", date: "2004-01-01", rating: 5.8, img: "images/balto.jpg", overview: "overview" },
    { title: "Movie F", date: "2005-01-01", rating: 6.6, img: "images/starwars.jpg", overview: "overview" },
    { title: "Movie G", date: "2006-01-01", rating: 7.0, img: "images/rebecca.jpg", overview: "overview" },
    { title: "Movie H", date: "2007-01-01", rating: 6.2, img: "images/jumanji.jpg", overview: "overview" },
    { title: "Movie I", date: "2008-01-01", rating: 7.8, img: "images/toystory.jpg", overview: "overview" },
    { title: "Movie J", date: "2009-01-01", rating: 6.8, img: "images/fourrooms.jpg", overview: "overview" },
    { title: "Movie K", date: "2010-01-01", rating: 7.5, img: "images/goldeneye.jpg", overview: "overview" },
    { title: "Movie L", date: "2011-01-01", rating: 6.4, img: "images/starwars.jpg", overview: "overview" }
  ];

  const movieGrid = document.getElementById("movie-grid");
  const searchInput = document.getElementById("search");
  const filterBtn = document.getElementById("btn");

  function renderMovies(data) {
    movieGrid.innerHTML = "";
    data.forEach(movie => {
      const card = document.createElement("div");
      card.className = "movie-card";
      card.innerHTML = `
        <div class="poster-wrap">
          <img src="${movie.img}" alt="${movie.title}">
          <div class="overlay">줄거리:<br>${movie.overview}</div>
        </div>
        <div class="movie-title">${movie.title}</div>
        <div class="movie-date">📅 ${movie.date}</div>
        <div class="movie-rating">⭐ ${movie.rating}/10</div>
      `;
      movieGrid.appendChild(card);
    });
  }

  function sortMovies(data, type) {
    const sorted = [...data];
    switch (type) {
      case "rating-desc":
        sorted.sort((a, b) => b.rating - a.rating); break;
      case "rating-asc":
        sorted.sort((a, b) => a.rating - b.rating); break;
      case "date-desc":
        sorted.sort((a, b) => new Date(b.date) - new Date(a.date)); break;
      case "date-asc":
        sorted.sort((a, b) => new Date(a.date) - new Date(b.date)); break;
    }
    return sorted;
  }

    filterBtn.addEventListener("click", () => {
    const keyword = searchInput.value.trim().toLowerCase();
    const selectedSortInput = document.querySelector('input[name="sort"]:checked');

    let filtered = movieData.filter(movie =>
        movie.title.toLowerCase().includes(keyword)
    );

    if (selectedSortInput) {
        const selectedSort = selectedSortInput.value;
        filtered = sortMovies(filtered, selectedSort);
    }

    renderMovies(filtered);
    });

  document.querySelectorAll('input[name="sort"]').forEach(input => {
    input.addEventListener("change", () => {
      const keyword = searchInput.value.trim().toLowerCase();
      const filtered = movieData.filter(movie =>
        movie.title.toLowerCase().includes(keyword)
      );
      const sorted = sortMovies(filtered, input.value);
      renderMovies(sorted);
    });
  });

  renderMovies(sortMovies(movieData));
</script>


</body>
</html>